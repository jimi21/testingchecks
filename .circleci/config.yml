version: 2.1

orbs:
  fcheck: jimicircleci/fcheck@dev:alpha

jobs:
  clone_private_repo:
    docker:
      # - image: circleci/python:3.9
      # - image: cimg/base:stable
      - image: shahidraza962/python-code-checks:2
    working_directory: /app
    steps:
      - checkout:
          path: /src
      # - run:
          # name: Run black command
          # command: |
          #   bash script.sh black
      - run:
          name: Run isort command
          command: |
            bash script.sh isort
      # - run:
      #     name: Run flake8 command
      #     command: |
      #       bash script.sh flake8
      - run:
          name: Run mypy command
          command: |
            bash script.sh mypy

      # - run:
      #     name: Clone Private Repo
      #     command: |
      #       mkdir privaterepo
      #       ls -la
      #       git config --global credential.helper store
      #       git clone https://$GITHUB_USERNAME:$PAT@github.com/$GITHUB_USERNAME/privaterepo.git privaterepo
      #       ls -al privaterepo

      # - fcheck/pip

      # - run:
      #     name: Run shell script
      #     command: |
      #       cd privaterepo
      #       chmod +x docker_miniconda_ubuntu_setup.sh
      #       echo running script...
      #       ./docker_miniconda_ubuntu_setup.sh
# testing
workflows:
  static-checks:
    jobs:
      # - fcheck/pip:
      #     context: static-checks
      - clone_private_repo
          # context:
          #   - github-cred
          #   - static-checks
          # requires:
          #  - fcheck/pip
      # Make sure to include "filters: *filters" in every test job you want to run as part of your deployment.
      - fcheck/format:
          context: static-checks
      - fcheck/lint:
          context: static-checks
      - fcheck/mypy:
          context: static-checks
